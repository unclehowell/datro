{"version":3,"sources":["webpack:///./vector-tiles-4326.js"],"names":["length","let","i","Math","pow","then","map","const","tileGrid","extent","tileSize","resolutions","mapboxStyle","get","getLayers","forEach","layer","mapboxSource","sources","type","source","getSource","setSource","format","projection","urls","getUrls","setView","zoom","center"],"mappings":"4FAAA,4DAYA,IAAmBA,OAAS,GAC5B,IAAKC,IAAIC,EAAI,EAAGA,EAAI,KAAMA,EACxB,IAAmBA,GAHC,QAGoBC,KAAKC,IAAI,EAAGF,EAAI,GAG1D,YACE,MACA,6FACAG,MAAK,SAAUC,GAEfC,IAAMC,EAAW,IAAI,IAAS,CAC5BC,OAAQ,EAAE,KAAM,GAAI,IAAK,IACzBC,SAAU,IACVC,YAAa,MAGTC,EAAcN,EAAIO,IAAI,gBAG5BP,EAAIQ,YAAYC,SAAQ,SAAUC,GAChCT,IAAMU,EAAeD,EAAMH,IAAI,iBAC/B,GAAII,GAA2D,WAA3CL,EAAYM,QAAQD,GAAcE,KAAmB,CACvEZ,IAAMa,EAASJ,EAAMK,YACrBL,EAAMM,UACJ,IAAI,IAAiB,CACnBC,OAAQ,IAAI,IACZC,WAAY,YACZC,KAAML,EAAOM,UACblB,SAAUA,SAOlBF,EAAIqB,QACF,IAAI,IAAK,CACPH,WAAY,YACZI,KAAMhB,EAAYgB,KAClBC,OAAQjB,EAAYiB,e","file":"vector-tiles-4326.js","sourcesContent":["import MVT from '../src/ol/format/MVT.js';\nimport TileGrid from '../src/ol/tilegrid/TileGrid.js';\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\nimport View from '../src/ol/View.js';\n\nimport olms from 'ol-mapbox-style';\nimport {defaultResolutions} from 'ol-mapbox-style/dist/util.js';\n\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\n\n// Match the server resolutions\nconst maxResolution = 360 / 512;\ndefaultResolutions.length = 14;\nfor (let i = 0; i < 14; ++i) {\n  defaultResolutions[i] = maxResolution / Math.pow(2, i + 1);\n}\n\nolms(\n  'map',\n  'https://api.maptiler.com/maps/basic-4326/style.json?key=' + key\n).then(function (map) {\n  // Custom tile grid for the EPSG:4326 projection\n  const tileGrid = new TileGrid({\n    extent: [-180, -90, 180, 90],\n    tileSize: 512,\n    resolutions: defaultResolutions,\n  });\n\n  const mapboxStyle = map.get('mapbox-style');\n\n  // Replace the source with a EPSG:4326 projection source for each vector tile layer\n  map.getLayers().forEach(function (layer) {\n    const mapboxSource = layer.get('mapbox-source');\n    if (mapboxSource && mapboxStyle.sources[mapboxSource].type === 'vector') {\n      const source = layer.getSource();\n      layer.setSource(\n        new VectorTileSource({\n          format: new MVT(),\n          projection: 'EPSG:4326',\n          urls: source.getUrls(),\n          tileGrid: tileGrid,\n        })\n      );\n    }\n  });\n\n  // Configure the map with a view with EPSG:4326 projection\n  map.setView(\n    new View({\n      projection: 'EPSG:4326',\n      zoom: mapboxStyle.zoom,\n      center: mapboxStyle.center,\n    })\n  );\n});\n"],"sourceRoot":""}